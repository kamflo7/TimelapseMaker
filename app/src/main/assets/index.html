<html>
	<head>
		<title>TimelapseMaker HTTP Server v1</title>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
		<script type="text/javascript">
			var repeatTime = 3000;
			var number = 0;
		
			$(document).ready(function() {
				$("#resultIp").html(
					"Pathname: " + window.location.pathname +
					"<br />Url: " + window.location.href
				);
				
				repeat();
			
				$("#btn").click(function() {
					$.ajax({
							url: getBaseHref()+'pokemon.api',
							success: function(html) {
								$("#result").html("Your pokemon: " + html);
							}
					});
				});
			});
			
			function log(msg) {
				$("#resultSocket").append(msg+"<br />");
			}
			
			function getBaseHref() {
				return "http://" + window.location.hostname + ":8080/";
			}
			
			function repeat() {
				$.ajax({
							url: getBaseHref()+'pokemon.api',
							success: function(html) {
								$("#result").html("[" + (number++) + "] Your pokemon: " + html);
								
								var json = JSON.parse(html);
								if(json.photo_base64) {
									$("#imgResult").attr("src", "data:image/png;base64," + json.photo_base64);
								}
								
								setTimeout("repeat()", repeatTime);
							}
					});
			}
		</script>
	</head>
	<body>
		<h1>Hello server!</h1>
		<p>This is embedded html in res/raw directory</p>
		<input type="button" id="btn" value="Dziabnij pokemona" />
		<p id="result"></p>
		<p id="resultIp"></p>
		<div id="resultSocket" style="width: 800px; border: 1px ridge black">aaaa</div>
		<!--<img width="300" src="nyan.jpg" />-->
		<img id="imgResult" width="600" />
	</body>
</html>